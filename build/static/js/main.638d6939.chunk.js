(this["webpackJsonppersonal-finance-manager-react"]=this["webpackJsonppersonal-finance-manager-react"]||[]).push([[0],{148:function(t,e,n){},150:function(t,e,n){"use strict";n.r(e);var c={};n.r(c),n.d(c,"fetchTransactionsRequest",(function(){return p})),n.d(c,"fetchTransactionsSuccess",(function(){return m})),n.d(c,"fetchTransactionsError",(function(){return x})),n.d(c,"addTransactionRequest",(function(){return v})),n.d(c,"addTransactionSuccess",(function(){return g})),n.d(c,"addTransactionError",(function(){return y})),n.d(c,"deleteTransactionRequest",(function(){return T})),n.d(c,"deleteTransactionSuccess",(function(){return S})),n.d(c,"deleteTransactionError",(function(){return k})),n.d(c,"transactionsSummaryRequest",(function(){return C})),n.d(c,"transactionsSummarySuccess",(function(){return _})),n.d(c,"transactionsSummaryError",(function(){return E})),n.d(c,"filterTransactions",(function(){return w}));var a={};n.r(a),n.d(a,"fetchTransactions",(function(){return W})),n.d(a,"addTransaction",(function(){return D})),n.d(a,"deleteTransaction",(function(){return L}));var r={};n.r(r),n.d(r,"getLoading",(function(){return A})),n.d(r,"getFilter",(function(){return B})),n.d(r,"getAllTransactions",(function(){return J})),n.d(r,"getVisibleTransactions",(function(){return X})),n.d(r,"getIncomeSum",(function(){return H})),n.d(r,"getTransactionById",(function(){return U}));var s=n(1),i=n.n(s),o=n(10),u=n(17),d=n.n(u),j=n(23),b=n(5),l=n(24),f=n(63),O=n.n(f),h=(n(80),n(6)),p=Object(h.b)("transactions/fetchTransactionsRequest"),m=Object(h.b)("transactions/fetchTransactionsSuccess"),x=Object(h.b)("transactions/fetchTransactionsError"),v=Object(h.b)("transactions/addTransactionRequest"),g=Object(h.b)("transactions/addTransactionSuccess"),y=Object(h.b)("transactions/addTransactionError"),T=Object(h.b)("transactions/deleteTransactionRequest"),S=Object(h.b)("transactions/deleteTransactionSuccess"),k=Object(h.b)("transactions/deleteTransactionError"),C=Object(h.b)("transactions/transactionsSummaryRequest"),_=Object(h.b)("transactions/transactionsSummarySuccess"),E=Object(h.b)("transactions/transactionsSummaryError"),w=Object(h.b)("transactions/filter"),N=n(19),R=n.n(N),q=n(39),F=n(29),M=n.n(F);M.a.defaults.baseURL="https://personal-finance-manager-api.herokuapp.com";var I,W=function(){return function(){var t=Object(q.a)(R.a.mark((function t(e){var n,a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(c.fetchTransactionsRequest()),t.prev=1,t.next=4,M.a.get("/api/transactions");case 4:n=t.sent,a=n.data,e(c.fetchTransactionsSuccess(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e(c.fetchTransactionsError(t.t0.message)),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},D=function(t){var e=t.datetime,n=t.category,a=t.operationType,r=t.amount,s=t.description;return function(){var t=Object(q.a)(R.a.mark((function t(i){var o,u,d;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={datetime:e,category:n,operationType:a,amount:r,description:s},i(c.addTransactionRequest()),t.prev=2,t.next=5,M.a.post("/api/transactions",o);case 5:u=t.sent,d=u.data,i(c.addTransactionSuccess(d)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),i(c.addTransactionError(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},L=function(t){return function(){var e=Object(q.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(c.deleteTransactionRequest()),e.prev=1,e.next=4,M.a.delete("/api/transactions/".concat(t));case 4:n(c.deleteTransactionSuccess(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(c.deleteTransactionError(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},Y=n(30),A=function(t){return t.transactions.loading},B=function(t){return t.transactions.filter},J=function(t){return t.transactions.items},X=Object(Y.a)([J,B],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.item.toLowerCase().includes(n)}))})),H=Object(Y.a)([J],(function(t){return t.reduce((function(t,e){return t+e.amount}),0)})),U=function(t){return Object(Y.a)([J],(function(e){return e.find((function(e){return e._id===t}))}))},V=n(40),z=n(68),G=n(11),K=Object(h.c)([],(I={},Object(V.a)(I,m,(function(t,e){return e.payload.transactions})),Object(V.a)(I,g,(function(t,e){return[e.payload.result].concat(Object(z.a)(t))})),Object(V.a)(I,S,(function(t,e){var n=e.payload;return t.filter((function(t){return t._id!==n}))})),I)),P=function(t){return t.type.startsWith("transactions")&&t.type.endsWith("Request")},Q=function(t){return t.type.startsWith("transactions")&&(t.type.endsWith("Success")||t.type.endsWith("Error"))},Z=Object(h.c)(!1,(function(t){t.addMatcher(P,(function(){return!0})).addMatcher(Q,(function(){return!1}))})),$=Object(G.b)({items:K,loading:Z}),tt=n(3),et=function(){var t=Object(o.b)(),e=Object(s.useState)(new Date),n=Object(l.a)(e,2),c=n[0],r=n[1],i=Object(s.useState)(""),u=Object(l.a)(i,2),d=u[0],j=u[1],b=Object(s.useState)(""),f=Object(l.a)(b,2),h=f[0],p=f[1],m=Object(s.useState)(""),x=Object(l.a)(m,2),v=x[0],g=x[1],y=Object(s.useState)(""),T=Object(l.a)(y,2),S=T[0],k=T[1],C=Object(s.useCallback)((function(t){var e=t.currentTarget,n=e.name,c=e.value;switch(console.log(t.currentTarget),n){case"category":j(c);break;case"operationType":p(c);break;case"amount":g(c);break;case"description":k(c);break;default:console.warn("\u0422\u0438\u043f \u043f\u043e\u043b\u044f ".concat(n," \u043d\u0435 \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439"))}}),[]),_=Object(s.useCallback)((function(e){e.preventDefault(),t(a.addTransaction({datetime:c,category:d,operationType:h,amount:v,description:S})),j(""),p(""),g(""),k("")}),[t,c,d,h,v,S]);return Object(tt.jsx)("div",{className:"container",children:Object(tt.jsxs)("form",{className:"form",onSubmit:_,children:[Object(tt.jsx)("input",{type:"text",name:"category",value:d,onChange:C,placeholder:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",autoComplete:"off"}),Object(tt.jsx)("input",{type:"text",name:"operationType",value:h,onChange:C,placeholder:"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0457",autoComplete:"off"}),Object(tt.jsx)("input",{name:"amount",value:v,type:"number",max:"1000000",min:"1",onChange:C,placeholder:"00.00",pattern:"\\d+(.\\d{2})?",autoComplete:"off"}),Object(tt.jsx)(O.a,{selected:c,onChange:r,dateFormat:"dd.MM.yyyy",customInput:Object(tt.jsx)("input",{type:"text"})}),Object(tt.jsx)("input",{type:"text",name:"description",value:S,onChange:C,placeholder:"\u041e\u043f\u0438\u0441",autoComplete:"off"}),Object(tt.jsx)("button",{className:"btn",type:"submit",children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})})},nt=function(){return Object(tt.jsx)(tt.Fragment,{children:Object(tt.jsx)(et,{})})},ct=function(){var t=Object(o.b)(),e=Object(o.c)(r.getAllTransactions),n=Object(s.useCallback)((function(e){return t(a.deleteTransaction(e))}),[t]);return Object(tt.jsx)("div",{className:"container",children:Object(tt.jsxs)("table",{className:"table",children:[Object(tt.jsx)("thead",{children:Object(tt.jsxs)("tr",{children:[Object(tt.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430"}),Object(tt.jsx)("th",{children:"\u041e\u043f\u0438\u0441"}),Object(tt.jsx)("th",{children:"\u0414\u0456\u0457"})]})}),Object(tt.jsx)("tbody",{children:e.map((function(t){var e=t._id,c=t.category,a=t.description;return Object(tt.jsxs)("tr",{children:[Object(tt.jsx)("td",{children:c}),Object(tt.jsx)("td",{children:a}),Object(tt.jsx)("td",{children:Object(tt.jsx)("button",{type:"button",onClick:function(){return n(e)},children:"X"})})]},e)}))})]})})},at=function(){return Object(tt.jsx)(tt.Fragment,{children:Object(tt.jsx)(ct,{})})},rt=n(66),st=n.n(rt),it=function(){var t=Object(o.b)(),e=Object(o.c)(r.getAllTransactions);console.log(e);var n=Object(s.useCallback)((function(e){return t(a.deleteTransaction(e))}),[t]);return Object(tt.jsx)("div",{className:"container",children:Object(tt.jsxs)("table",{className:"table",children:[Object(tt.jsx)("thead",{children:Object(tt.jsxs)("tr",{children:[Object(tt.jsx)("th",{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440i\u044f"}),Object(tt.jsx)("th",{children:"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"}),Object(tt.jsx)("th",{children:"\u0421\u0443\u043c\u0430"}),Object(tt.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(tt.jsx)("th",{children:"\u041e\u043f\u0438\u0441"}),Object(tt.jsx)("th",{children:"\u0414\u0456\u0457"})]})}),Object(tt.jsx)("tbody",{children:e.map((function(t){var e=t._id,c=t.category,a=t.operationType,r=t.amount,s=t.datetime,i=t.description;return Object(tt.jsxs)("tr",{children:[Object(tt.jsx)("td",{children:c}),Object(tt.jsx)("td",{children:a}),Object(tt.jsx)("td",{children:r}),Object(tt.jsx)("td",{children:st()(s).format("DD.MM.YYYY")}),Object(tt.jsx)("td",{children:i}),Object(tt.jsx)("td",{children:Object(tt.jsx)("button",{type:"button",onClick:function(){return n(e)},children:"X"})})]},e)}))})]})})},ot=function(){return Object(tt.jsx)(tt.Fragment,{children:Object(tt.jsx)(it,{})})},ut={home:"/",categories:"/categories",category:"/category/:categoryId",transactions:"/transactions",transaction:"/transaction/:transactionId"},dt=function(){return Object(tt.jsxs)(tt.Fragment,{children:[Object(tt.jsx)("header",{children:Object(tt.jsxs)("nav",{children:[Object(tt.jsx)(j.b,{className:"nav_link",activeClassName:"nav_link__active",exact:!0,to:ut.home,children:"Home"}),Object(tt.jsx)(j.b,{className:"nav_link",activeClassName:"nav_link__active",exact:!0,to:ut.categories,children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),Object(tt.jsx)(j.b,{className:"nav_link",activeClassName:"nav_link__active",exact:!0,to:ut.transactions,children:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457"})]})}),Object(tt.jsxs)(b.c,{children:[Object(tt.jsx)(b.a,{exact:!0,path:ut.home,component:nt}),Object(tt.jsx)(b.a,{path:ut.categories,component:at}),Object(tt.jsx)(b.a,{path:ut.transactions,component:ot})]})]})},jt=function(){return Object(tt.jsx)("header",{children:Object(tt.jsx)(dt,{})})},bt=function(){var t=Object(o.b)();return Object(s.useEffect)((function(){t(a.fetchTransactions())}),[t]),Object(tt.jsx)(tt.Fragment,{children:Object(tt.jsx)(jt,{})})},lt=Object(h.a)({reducer:{transactions:$},devTools:!1});n(148);d.a.render(Object(tt.jsx)(i.a.StrictMode,{children:Object(tt.jsx)(o.a,{store:lt,children:Object(tt.jsx)(j.a,{children:Object(tt.jsx)(bt,{})})})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.638d6939.chunk.js.map